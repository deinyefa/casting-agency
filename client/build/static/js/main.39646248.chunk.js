(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{47:function(e,t,a){e.exports=a(76)},52:function(e,t,a){},74:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(24),l=a.n(c),o=(a(52),a(21)),i=a(78),u=a(11),s=a.n(u),m=a(15),p=a(8),d=a(46),f=a(42),g=a.n(f),E=function(){return window.history.replaceState({},document.title,window.location.pathname)},v=r.a.createContext(),b=function(){return Object(n.useContext)(v)},h=a(13),O=Object(h.a)(),y=a(77),j=a(79),k=a(80),w=a(16),x=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null,"Casting Agency"),r.a.createElement(i.a,{className:"d-flex"},r.a.createElement(j.a,null,r.a.createElement(k.a,null,r.a.createElement(w.a,{to:"/movies"},"Movies"))),r.a.createElement(j.a,null,r.a.createElement(k.a,null,r.a.createElement(w.a,{to:"/actors"},"Actors")))))},C=a(81),N=a(82),S=a(83),P=a(84),A=a(85),T=a(86),D=a(87),L=a(44),M=a(101),R=a(102),_=a(103),B=a(88),W=function(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),a=t[0],c=t[1],l=b(),o=l.user,u=l.isAuthenticated,s=l.loginWithRedirect,m=l.logout,d=function(){return m({returnTo:window.location.origin})};return r.a.createElement("div",{className:"nav-container"},r.a.createElement(C.a,{color:"light",light:!0,expand:"md"},r.a.createElement(i.a,null,r.a.createElement(N.a,{className:"logo"}),r.a.createElement(S.a,{onClick:function(){return c(!a)}}),r.a.createElement(P.a,{isOpen:a,navbar:!0},r.a.createElement(A.a,{className:"mr-auto",navbar:!0},r.a.createElement(T.a,null,r.a.createElement(D.a,{tag:w.b,to:"/",exact:!0,activeClassName:"router-link-exact-active"},"Home"))),r.a.createElement(A.a,{className:"d-none d-md-block",navbar:!0},!u&&r.a.createElement(T.a,null,r.a.createElement(L.a,{id:"qsLoginBtn",color:"primary",className:"btn-margin",onClick:function(){return s({})}},"Log in")),u&&r.a.createElement(M.a,{nav:!0,inNavbar:!0},r.a.createElement(R.a,{nav:!0,caret:!0,id:"profileDropDown"},r.a.createElement("img",{src:o?o.picture:"",alt:"Profile",className:"nav-user-profile rounded-circle",width:"50"})),r.a.createElement(_.a,null,r.a.createElement(B.a,{header:!0},o?o.name:""),r.a.createElement(B.a,{tag:w.b,to:"/movies",className:"dropdown-profile",activeClassName:"router-link-exact-active"},"Movies"),r.a.createElement(B.a,{tag:w.b,to:"/actors",className:"dropdown-profile",activeClassName:"router-link-exact-active"},"Actors"),r.a.createElement(B.a,{id:"qsLogoutBtn",onClick:function(){return d()}},"Log out")))),!u&&r.a.createElement(A.a,{className:"d-md-none",navbar:!0},r.a.createElement(T.a,null,r.a.createElement(L.a,{id:"qsLoginBtn",color:"primary",block:!0,onClick:function(){return s({})}},"Log in"))),u&&r.a.createElement(A.a,{className:"d-md-none justify-content-between",navbar:!0,style:{minHeight:170}},r.a.createElement(T.a,null,r.a.createElement("span",{className:"user-info"},r.a.createElement("img",{src:o?o.picture:"",alt:"Profile",className:"nav-user-profile d-inline-block rounded-circle mr-3",width:"50"}),r.a.createElement("h6",{className:"d-inline-block"},o?o.name:""))),r.a.createElement(T.a,null,r.a.createElement(w.b,{to:"/actors",activeClassName:"router-link-exact-active"},"Actors")),r.a.createElement(T.a,null,r.a.createElement(w.b,{to:"#",id:"qsLogoutBtn",onClick:function(){return d()}},"Log out")))))))},U=a(29),z=a(99),J=a(28),q=a.n(J),F=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"GET",c=arguments.length>4?arguments[4]:void 0,l=Object(n.useState)(t),o=Object(p.a)(l,2),i=o[0],u=o[1];return Object(n.useEffect)((function(){function t(){return(t=Object(m.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,{method:r,headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},body:JSON.stringify(c)});case 2:return n=t.sent,t.t0=u,t.next=6,n.json();case 6:t.t1=t.sent,(0,t.t0)(t.t1);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e,a]),i},H=a(96),G=a(97),I=a(98),Z=a(25),$=a(100),K=a(89),Q=a(90),V=a(91),X=a(92),Y=a(93),ee=a(94),te=a(95);function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ne=function(e){var t=e.isOpen,a=e.toggleModal,c=e.movieData,l=e.token,o=e.editing,i=Object(n.useState)({title:c&&c.title||"",release_date:c&&c.release_date||""}),u=Object(p.a)(i,2),d=u[0],f=u[1],g=Object(n.useState)(),E=Object(p.a)(g,2),v=(E[0],E[1]),b="".concat("http://localhost:5000","/movies"),h=function(e,t){f(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(a,!0).forEach((function(t){Object(Z.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},d,Object(Z.a)({},e,t)))},O=function(){var e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={title:d.title,release_date:d.release_date},e.t0=v,e.next=4,fetch(o?"".concat(b,"/").concat(c.id):b,{method:o?"PATCH":"POST",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:e.t1=e.sent,(0,e.t0)(e.t1),a();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement($.a,{isOpen:t,toggle:a},r.a.createElement(K.a,{toggle:a},"Add a movie"),r.a.createElement(Q.a,null,r.a.createElement(V.a,{onSubmit:O},r.a.createElement(X.a,null,r.a.createElement(Y.a,null,"Movie title"),r.a.createElement(ee.a,{type:"text",name:"title",id:"title",value:d.title,onChange:function(e){return h("title",e.target.value)}})),r.a.createElement(X.a,null,r.a.createElement(Y.a,null,"Movie release date"),r.a.createElement(ee.a,{type:"date",name:"release_date",id:"release_date",value:d.release_date,onChange:function(e){return h("release_date",e.target.value)}})))),r.a.createElement(te.a,null,r.a.createElement(L.a,{color:"warning",onClick:a},"Cancel"),r.a.createElement(L.a,{color:"primary",type:"submit",onClick:O},"Add")))},re=function(e){var t=e.movie,a=e.exposedToken,c=e.token,l=Object(n.useState)(!1),o=Object(p.a)(l,2),i=o[0],u=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{md:"4",className:"my-3"},r.a.createElement(j.a,null,r.a.createElement(k.a,null,r.a.createElement(G.a,null,t.title),r.a.createElement(I.a,null,"Release Date: ",t.release_date),r.a.createElement("div",{className:"clearfix p-2"},-1!==a.permissions.indexOf("patch:actors+movies")?r.a.createElement(L.a,{color:"primary",className:"float-left",onClick:function(){u(!i)}},"Edit"):null,-1!==a.permissions.indexOf("post+delete:movies")?r.a.createElement(L.a,{color:"danger",className:"float-right"},"Delete"):null)))),i?r.a.createElement(ne,{isOpen:i,toggleModal:function(){return u(!i)},movieData:t,editing:!0,token:c}):null)},ce=function(){var e,t=Object(n.useState)(!1),a=Object(p.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(1),u=Object(p.a)(o,2),s=u[0],m=u[1],d=Object(n.useState)(),f=Object(p.a)(d,2),g=f[0],E=f[1],v=b(),h=v.getTokenSilently,O=v.user,y=v.loading;O&&!y&&h().then((function(e){return E(e)})),g&&(e=q()(g));var j="".concat("http://localhost:5000","/movies?page=").concat(s),k=F(j,{},g)||{};return r.a.createElement(i.a,null,r.a.createElement("h1",null,"Movies!"),e&&-1!==e.permissions.indexOf("post+delete:movies")?r.a.createElement(L.a,{color:"primary",onClick:function(){return l(!c)}},"Add a movie"):null,c?r.a.createElement(ne,{isOpen:c,toggleModal:function(){return l(!c)},token:g}):null,r.a.createElement(z.a,null,k.movies?k.movies.map((function(t){return r.a.createElement(re,{key:t.id,movie:t,exposedToken:e,token:g})})):r.a.createElement("p",null,"Loading...")),r.a.createElement(z.a,{className:"justify-content-center"},function(){for(var e=[],t=Math.ceil(k.total_movies/10),a=function(t){e=[].concat(Object(U.a)(e),[r.a.createElement("span",{key:t,className:"page-num ".concat(t===s?"active":""),onClick:function(){m(t)}},t)])},n=1;n<=t;n++)a(n);return e}()))};function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var oe=function(e){var t=e.isOpen,a=e.toggleModal,c=e.actorData,l=e.editing,o=e.token,i=Object(n.useState)({name:c&&c.name||"",age:c&&c.age||"",gender:c&&c.gender||""}),u=Object(p.a)(i,2),d=u[0],f=u[1],g="".concat("http://localhost:5000","/actors"),E=function(e,t){f(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(a,!0).forEach((function(t){Object(Z.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},d,Object(Z.a)({},e,t)))},v=function(){var e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:d.name,age:d.age,gender:d.gender},e.next=3,fetch(l?"".concat(g,"/").concat(c.id):g,{method:l?"PATCH":"POST",headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:a();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{isOpen:t,toggle:a},r.a.createElement(K.a,{toggle:a},"Add an actor"),r.a.createElement(Q.a,null,r.a.createElement(V.a,{onSubmit:v},r.a.createElement(X.a,null,r.a.createElement(Y.a,null,"Actor name"),r.a.createElement(ee.a,{type:"text",name:"name",id:"name",value:d.name,onChange:function(e){return E("name",e.target.value)}})),r.a.createElement(X.a,null,r.a.createElement(Y.a,null,"Actor age"),r.a.createElement(ee.a,{type:"text",name:"age",id:"age",value:d.age,onChange:function(e){return E("age",e.target.value)}})),r.a.createElement(X.a,null,r.a.createElement(Y.a,null,"Actor gender"),r.a.createElement(ee.a,{type:"text",name:"gender",id:"gender",value:d.gender,onChange:function(e){return E("gender",e.target.value)}})))),r.a.createElement(te.a,null,r.a.createElement(L.a,{color:"warning",onClick:a},"Cancel"),r.a.createElement(L.a,{color:"primary",type:"submit",onClick:v},"Add"))))},ie=function(e){var t=e.actor,a=e.exposedToken,c=e.token,l=Object(n.useState)(!1),o=Object(p.a)(l,2),i=o[0],u=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{md:"4",className:"my-3"},r.a.createElement(j.a,null,r.a.createElement(k.a,null,r.a.createElement(G.a,null,t.name,", ",t.age),r.a.createElement(I.a,null,t.gender),r.a.createElement("div",{className:"clearfix p-2"},-1!==a.permissions.indexOf("patch:actors+movies")?r.a.createElement(L.a,{color:"primary",className:"float-left",onClick:function(){u(!i)}},"Edit"):null,-1!==a.permissions.indexOf("post+delete:actors")?r.a.createElement(L.a,{color:"danger",className:"float-right"},"Delete"):null)))),i?r.a.createElement(oe,{isOpen:i,toggleModal:function(){return u(!i)},actorData:t,editing:!0,token:c}):null)},ue=function(){var e,t=Object(n.useState)(!1),a=Object(p.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(1),u=Object(p.a)(o,2),s=u[0],m=u[1],d=Object(n.useState)(),f=Object(p.a)(d,2),g=f[0],E=f[1],v=b(),h=v.getTokenSilently,O=v.user,y=v.loading;O&&!y&&h().then((function(e){return E(e)})),g&&(e=q()(g));var j="".concat("http://localhost:5000","/actors?page=").concat(s),k=F(j,{},g);return r.a.createElement(i.a,null,r.a.createElement("h1",null,"Actors"),e&&-1!==e.permissions.indexOf("post+delete:actors")?r.a.createElement(L.a,{color:"primary",onClick:function(){return l(!c)}},"Add an actor"):null,c?r.a.createElement(oe,{isOpen:c,toggleModal:function(){return l(!c)},token:g}):null,r.a.createElement(z.a,null,k.actors?k.actors.map((function(t){return r.a.createElement(ie,{key:t.id,actor:t,exposedToken:e,token:g})})):r.a.createElement("p",null,"Loading...")),r.a.createElement(z.a,{className:"justify-content-center"},function(){for(var e=[],t=Math.ceil(k.total_actors/10),a=function(t){e=[].concat(Object(U.a)(e),[r.a.createElement("span",{key:t,className:"page-num ".concat(t===s?"active":""),onClick:function(){m(t)}},t)])},n=1;n<=t;n++)a(n);return e}()))};a(74);var se=function(){var e=b.loading,t=b.user;return e&&!t?r.a.createElement("p",null,"Loading..."):r.a.createElement(o.b,{history:O},r.a.createElement("div",{id:"app",className:"d-flex flex-column w-100"},r.a.createElement(W,null),r.a.createElement(i.a,{className:"flex-grow-1 mt-5"},r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/",exact:!0,component:x}),r.a.createElement(o.a,{path:"/movies",component:ce}),r.a.createElement(o.a,{path:"/actors",component:ue})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(75);l.a.render(r.a.createElement((function(e){var t=e.children,a=e.onRedirectCallback,c=void 0===a?E:a,l=Object(d.a)(e,["children","onRedirectCallback"]),o=Object(n.useState)(),i=Object(p.a)(o,2),u=i[0],f=i[1],b=Object(n.useState)(),h=Object(p.a)(b,2),O=h[0],y=h[1],j=Object(n.useState)(),k=Object(p.a)(j,2),w=k[0],x=k[1],C=Object(n.useState)(!0),N=Object(p.a)(C,2),S=N[0],P=N[1],A=Object(n.useState)(!0),T=Object(p.a)(A,2),D=T[0],L=T[1];Object(n.useEffect)((function(){(function(){var e=Object(m.a)(s.a.mark((function e(){var t,a,n,r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()(l);case 2:if(t=e.sent,x(t),!window.location.search.includes("code=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:a=e.sent,n=a.appState,c(n);case 10:return e.next=12,t.isAuthenticated();case 12:if(r=e.sent,f(r),!r){e.next=19;break}return e.next=17,t.getUser();case 17:o=e.sent,y(o);case 19:P(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var M=function(){var e=Object(m.a)(s.a.mark((function e(){var t,a,n=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},L(!0),e.prev=2,e.next=5,w.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:return e.prev=10,L(!1),e.finish(10);case 13:return e.next=15,w.getUser();case 15:a=e.sent,y(a),f(!0);case 18:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.next=3,w.handleRedirectCallback();case 3:return e.next=5,w.getUser();case 5:t=e.sent,P(!1),f(!0),y(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(v.Provider,{value:{isAuthenticated:u,user:O,loading:S,popupOpen:D,loginWithPopup:M,handleRedirectCallback:R,getIdTokenClaims:function(){return w.getIdTokenClaims.apply(w,arguments)},loginWithRedirect:function(){return w.loginWithRedirect.apply(w,arguments)},getTokenSilently:function(){return w.getTokenSilently.apply(w,arguments)},getTokenWithPopup:function(){return w.getTokenWithPopup.apply(w,arguments)},logout:function(){return w.logout.apply(w,arguments)}}},t)}),{domain:"dev-deinyefa.auth0.com",client_id:"gZlfS8C3GgADzGL5UezkiwTTkNrPl5bR",redirect_uri:"https://casting-agency.herokuapp.com/",onRedirectCallback:function(e){O.push(e&&e.targetURL?e.targetURL:window.location.pathname)},audience:"casting-agency"},r.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[47,1,2]]]);
//# sourceMappingURL=main.39646248.chunk.js.map